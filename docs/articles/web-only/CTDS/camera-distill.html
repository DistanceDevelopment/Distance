<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Example analysis with Ivory Coast Maxwell's duiker.
">
<title>Analysis of camera trapping data • Distance</title>
<script src="../../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../../pkgdown.js"></script><meta property="og:title" content="Analysis of camera trapping data">
<meta property="og:description" content="Example analysis with Ivory Coast Maxwell's duiker.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
<p>



  list(file = "Clarity.txt")

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../../../index.html">Distance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../../reference/index.html">Function reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../../../articles/lines-distill.html">Line transects</a>
    <a class="dropdown-item" href="../../../articles/covariates-distill.html">Covariates in detection</a>
    <a class="dropdown-item" href="../../../articles/species-covariate-distill.html">Species as a covariate</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Only for the website</h6>
    <a class="dropdown-item" href="../../../articles/web-only/points/pointtransects-distill.html">Point transects</a>
    <a class="dropdown-item" href="../../../articles/web-only/groupsize/Remedy-size-bias-for-dolphin-surveys.html">Size bias remedy</a>
    <a class="dropdown-item" href="../../../articles/web-only/strata/strata-distill.html">Stratification</a>
    <a class="dropdown-item" href="../../../articles/web-only/differences/differences.html">Detecting difference in density between strata</a>
    <a class="dropdown-item" href="../../../articles/web-only/variance/variance-distill.html">Variance estimation with bootstrap</a>
    <a class="dropdown-item" href="../../../articles/web-only/cues/cuecounts-distill.html">Cue count surveys</a>
    <a class="dropdown-item" href="../../../articles/web-only/multipliers/multipliers-distill.html">Indirect surveys</a>
    <a class="dropdown-item" href="../../../articles/web-only/multispecies/multispecies-multioccasion-analysis.html">Take care when subsetting multispecies data sets</a>
    <a class="dropdown-item" href="../../../articles/web-only/CTDS/camera-distill.html">Camera trap distance sampling</a>
    <a class="dropdown-item" href="../../../articles/web-only/alt-optimise/mcds-dot-exe.html">Alternative optimiser</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/distancesamp" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DistanceDevelopment/Distance/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Analysis of camera trapping data</h1>
                        <h4 data-toc-skip class="author">Eric Howe, Eric Rexstad and Len Thomas</h4>
            <address class="author_afil">
      CREEM, Univ of St Andrews<br><h4 data-toc-skip class="date">May 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/DistanceDevelopment/Distance/blob/HEAD/vignettes/web-only/CTDS/camera-distill.Rmd" class="external-link"><code>vignettes/web-only/CTDS/camera-distill.Rmd</code></a></small>
      <div class="d-none name"><code>camera-distill.Rmd</code></div>
    </address>
</div>

    
    
<div class="section level2">
<h2 id="analysis-of-camera-trapping-data-using-distance-sampling">Analysis of camera trapping data using distance sampling<a class="anchor" aria-label="anchor" href="#analysis-of-camera-trapping-data-using-distance-sampling"></a>
</h2>
<p>A distance sampling approach to the analysis of camera trapping data offers the potential advantage that individual animal identification is not required. However, accurate animal-to-camera detection distances are required. This requires calibration prior to the survey with images of objects taken at known distances from the camera. See details in <span class="citation">Howe, Buckland, Després-Einspenner, &amp; Kühl (2017)</span> for description of the field work and data analysis. Here we present analysis of data from <span class="citation">Howe et al. (2017)</span> using the R package <code>Distance</code> <span class="citation">(Miller, Rexstad, Thomas, Marshall, &amp; Laake, 2019)</span>.</p>
<div class="section level3">
<h3 id="estimating-temporal-availability-for-detection">Estimating temporal availability for detection<a class="anchor" aria-label="anchor" href="#estimating-temporal-availability-for-detection"></a>
</h3>
<p>Heat- and motion-sensitive camera traps detect only moving animals within the range of the sensor and the field of view of the camera. Animals are therefore unavailable for detection by camera traps when they are stationary, and when they are above (e.g., semi-arboreal species) or below (e.g., semi-fossorial species) the range of the sensor or the camera, regardless of their distance from the camera in two dimensions. This temporally limited availability for detection must be accounted for to avoid negative bias in estimated densities. When data are abundant, researchers may choose to include only data from times when 100% of the population can be assumed to be active within the vertical range of camera traps <span class="citation">(Howe et al., 2017)</span>. However, for rarely-detected species or surveys with lower effort, it might be necessary to include most or all observations of distance. In these situations, survey duration (<span class="math inline">\(T_k\)</span>) might be 12- or 24-hours per day, and it becomes necessary to estimate the proportion of time included in <span class="math inline">\(T_k\)</span> when animals were available for detection. Methods for estimating this proportion directly from CT data have been described <span class="citation">(Rowcliffe, Kays, Kranstauber, Carbone, &amp; Jansen, 2014)</span>, and it can be included in analyses to estimate density <span class="citation">(Bessone et al., 2020)</span>, for example as another multiplier, potentially with an associated standard errors.</p>
</div>
<div class="section level3">
<h3 id="data-input">Data input<a class="anchor" aria-label="anchor" href="#data-input"></a>
</h3>
<p>Times of independent camera triggering events for the period 28 June 21 September 2014 at 23 cameras are recorded in a file described in the data repository <span class="citation">Howe, Buckland, Després-Einspenner, Kühl, &amp; Buckland (2018)</span>. <a href="https://datadryad.org/stash/downloads/file_stream/73223" class="external-link">Download the file from Dryad</a> and save to your local drive, then read with the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trigger.events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"VideoStartTimes_FullDays.txt"</span>, header<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The format of the <code>trigger.events</code> data frame is adjusted to create a <code>datetime</code> field for use in the <code>activity</code> package <span class="citation">Rowcliffe (2021)</span></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trigger.events</span><span class="op">$</span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"2014"</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02i"</span>, <span class="va">trigger.events</span><span class="op">$</span><span class="va">month</span><span class="op">)</span>, </span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02i"</span>, <span class="va">trigger.events</span><span class="op">$</span><span class="va">day</span><span class="op">)</span>,</span>
<span>                       sep<span class="op">=</span><span class="st">"/"</span><span class="op">)</span></span>
<span><span class="va">trigger.events</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02i"</span>, <span class="va">trigger.events</span><span class="op">$</span><span class="va">hour</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02i"</span>, <span class="va">trigger.events</span><span class="op">$</span><span class="va">minute</span><span class="op">)</span>,</span>
<span>                       sep<span class="op">=</span><span class="st">":"</span><span class="op">)</span></span>
<span><span class="va">trigger.events</span><span class="op">$</span><span class="va">datetime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">trigger.events</span><span class="op">$</span><span class="va">date</span>, <span class="va">trigger.events</span><span class="op">$</span><span class="va">time</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="functions-in-the-activity-package">Functions in the <code>activity</code> package<a class="anchor" aria-label="anchor" href="#functions-in-the-activity-package"></a>
</h3>
<p>We will employ two functions from the <code>activity</code> package. First, convert the time of day of a camera triggering event into the fraction of the 24hr cycle when the event took place, measured in radians. In other words, an event occurring at midday is recorded as <span class="math inline">\(\pi\)</span> and an event occurring at midnight is recorded as 2<span class="math inline">\(\pi\)</span>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">activity</span><span class="op">)</span></span>
<span><span class="va">trigger.events</span><span class="op">$</span><span class="va">rtime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/activity/man/gettime.html" class="external-link">gettime</a></span><span class="op">(</span><span class="va">trigger.events</span><span class="op">$</span><span class="va">datetime</span>, </span>
<span>                                tryFormats <span class="op">=</span> <span class="st">"%Y/%m/%d %H:%M"</span>,</span>
<span>                                scale <span class="op">=</span> <span class="st">"radian"</span><span class="op">)</span></span></code></pre></div>
<p>With the radian conversion of the camera triggering times, the distribution of the triggering events times is smoothed, using a kernel smoother by the function <code>fitact</code>. The function estimates the proportion of time (in a 24hr day) animals were active. In addition, the triggering time data can be resampled to provide a measure of uncertainty in the point estimate of activity proportion.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">act_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/activity/man/fitact.html" class="external-link">fitact</a></span><span class="op">(</span><span class="va">trigger.events</span><span class="op">$</span><span class="va">rtime</span>, sample<span class="op">=</span><span class="st">"data"</span>, reps<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>A plot of the histogram of triggering times (Figure <a href="#fig:actplot">1</a>), along with the fitted smooth is provided by a plot function applied to the object returned by <code>fitact</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">act_result</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:actplot"></span>
<img src="camera-distill_files/figure-html/actplot-1.png" alt="Fitted smooth to histogram of camera triggering times for Maxwell's duiker data."><p class="caption">
Figure 1: Fitted smooth to histogram of camera triggering times for Maxwell’s duiker data.
</p>
</div>
<p>The value computed by the smooth through the activity histogram can be extracted from the object created by <code>fitact</code>. The extraction reaches into the object to look at the <code>slot</code> called <code>act</code>. The uncertainty around the point estimate is derived from resampling that takes place within <code>fitact</code>. The slot will display the point estimates, standard error and confidence interval bounds.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">act_result</span><span class="op">@</span><span class="va">act</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        act         se   lcl.2.5%  ucl.97.5% </span></span>
<span><span class="co">## 0.33463831 0.02096859 0.30195769 0.37801207</span></span></code></pre>
<p>The output above would be used to adjust density estimates for temporal activity <strong>if</strong> the cameras were in operation 24hrs per day. However, in this study, cameras were only active for 11.5 hours per day (0630-1800).</p>
</div>
<div class="section level3">
<h3 id="adjustment-for-temporal-availability">Adjustment for temporal availability<a class="anchor" aria-label="anchor" href="#adjustment-for-temporal-availability"></a>
</h3>
<p>We use the temporal availability information to create a <em>multiplier</em>. Our multiplier must be defined as
&gt; proportion of the <em>camera operation time</em> animals were available to be detected</p>
<p>This is not equivalent to the value produced by the <code>fitact</code> function; that value is the proportion of <em>24hr</em> animals were available to be detected. The availability multiplier must be adjusted based on the daily camera operation period. Uncertainty in this proportion is also included in our computations.</p>
<p>The point estimate and standard error are pulled from the <code>fitact</code> object, adjusted for daily camera operation time and placed into a data frame named <code>creation</code> in a named list, specifically in the fashion shown.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camera.operation.per.day</span> <span class="op">&lt;-</span> <span class="fl">11.5</span></span>
<span><span class="va">prop.camera.time</span> <span class="op">&lt;-</span> <span class="va">camera.operation.per.day</span> <span class="op">/</span> <span class="fl">24</span></span>
<span><span class="va">avail</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>creation<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="va">act_result</span><span class="op">@</span><span class="va">act</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">/</span><span class="va">prop.camera.time</span>,</span>
<span>                                  SE   <span class="op">=</span> <span class="va">act_result</span><span class="op">@</span><span class="va">act</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">/</span><span class="va">prop.camera.time</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>A more robust way of incorporating uncertainty in the temporal availability estimate will be described later.</p>
</div>
</div>
<div class="section level2">
<h2 id="detection-data-analysis">Detection data analysis<a class="anchor" aria-label="anchor" href="#detection-data-analysis"></a>
</h2>
<p>Detection distances for the full daytime data set is also available on <span class="citation">Howe et al. (2018)</span>. <a href="https://datadryad.org/stash/downloads/file_stream/73221" class="external-link">Download from Dryad</a> and is read in the code chunk below:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DuikerCameraTraps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"DaytimeDistances.txt"</span>, header<span class="op">=</span><span class="cn">TRUE</span>, sep<span class="op">=</span><span class="st">"\t"</span><span class="op">)</span></span>
<span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">Area</span> <span class="op">&lt;-</span> <span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">Area</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1000</span><span class="op">*</span><span class="fl">1000</span><span class="op">)</span></span>
<span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">object</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">object</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">distance</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">distance</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Data file recorded study area size in square meters; second line above converts this to area in square kilometers; the remaining lines create an <code>object</code> field, which uniquely identify each observation.</p>
<div class="section level3">
<h3 id="exploratory-data-analysis">Exploratory Data Analysis<a class="anchor" aria-label="anchor" href="#exploratory-data-analysis"></a>
</h3>
<p>A quick summary of the data set including: How many camera stations and how many detections in total.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">distance</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 11180</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">Sample.Label</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##   A1   A2   A3   A4   B1   B2   B3   B4   C1   C2   C3   C4   C5   C6   D3   D4 </span></span>
<span><span class="co">##  388   66  988  420    3 1951   73  208   52  195  767  153   41 2682  342  193 </span></span>
<span><span class="co">##   D5   E3   E4   E5   E6 </span></span>
<span><span class="co">##  524  518    1  375 1241</span></span></code></pre>
<p>Note, three sampling stations (B1, C5, E4) had no detections. The one record for each of those stations has distance recorded as <code>NA</code>, but the record is important because it contains effort information.</p>
</div>
<div class="section level3">
<h3 id="distance-recording">Distance recording<a class="anchor" aria-label="anchor" href="#distance-recording"></a>
</h3>
<p>An examination of the distribution of detection distances; note the bespoke cutpoints causing distance bins to be narrow out to 8m, then increasing in width to the maximum detection distance of 21m (Figure <a href="#fig:distances">2</a>).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breakpoints</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">8</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fl">10</span>, <span class="fl">12</span>, <span class="fl">15</span>, <span class="fl">21</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span><span class="op">$</span><span class="va">distance</span>, breaks<span class="op">=</span><span class="va">breakpoints</span>, main<span class="op">=</span><span class="st">"Peak activity data set"</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"Radial distance (m)"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:distances"></span>
<img src="camera-distill_files/figure-html/distances-1.png" alt="Distribution of detection distances during peak activity period."><p class="caption">
Figure 2: Distribution of detection distances during peak activity period.
</p>
</div>
</div>
<div class="section level3">
<h3 id="truncation-decisions">Truncation decisions<a class="anchor" aria-label="anchor" href="#truncation-decisions"></a>
</h3>
<p>As described by <span class="citation">Howe et al. (2017)</span>:</p>
<blockquote>
<p>a paucity of observations between 1 and 2 m but not between 2 and 3 m, so we left-truncated at 2 m. Fitted detection functions and probability density functions were heavy-tailed when distances &gt;15 m were included, so we right truncated at 15 m.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="detection-function-fits">Detection function fits<a class="anchor" aria-label="anchor" href="#detection-function-fits"></a>
</h3>
<p>The conversion factor must be included <strong>both</strong> in the call to <code><a href="../../../reference/ds.html">ds()</a></code> and the call to <code><a href="../../../reference/bootdht.html">bootdht()</a></code>.</p>
<p>Candidate models considered here differ from the candidate set presented in <span class="citation">Howe et al. (2017)</span>. This set includes</p>
<ul>
<li>uniform key with 1, 2 and 3 cosine adjustments,</li>
<li>half normal key with 0, 1 and 2 cosine adjustment and</li>
<li>hazard rate key with 0, 1 simple polynomial adjustments.</li>
</ul>
<p>The maximum number of parameters in models within the candidate model set is no more than 3.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DistanceDevelopment/Distance/" class="external-link">Distance</a></span><span class="op">)</span></span>
<span><span class="va">trunc.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>left<span class="op">=</span><span class="fl">2</span>, right<span class="op">=</span><span class="fl">15</span><span class="op">)</span></span>
<span><span class="va">mybreaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">8</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fl">10</span>, <span class="fl">12</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="va">conversion</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/convert_units.html">convert_units</a></span><span class="op">(</span><span class="st">"meter"</span>, <span class="cn">NULL</span>, <span class="st">"square kilometer"</span><span class="op">)</span></span>
<span><span class="va">uni1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">1</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uni2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">2</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uni3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">3</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hn0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"hn"</span>, adjustment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>          convert_units <span class="op">=</span> <span class="va">conversion</span>, cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hn1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"hn"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>          nadj<span class="op">=</span><span class="fl">1</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>          cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hn2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"hn"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>          nadj<span class="op">=</span><span class="fl">2</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>          cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hr0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"hr"</span>, adjustment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>          convert_units <span class="op">=</span> <span class="va">conversion</span>, cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hr1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"hr"</span>, adjustment <span class="op">=</span> <span class="st">"poly"</span>,</span>
<span>          nadj<span class="op">=</span><span class="fl">1</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>          cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<p>We do not present the density estimates produced from the fitted detection function models because a) we have not chosen a preferred model and b) the density estimates have not been adjusted for viewing angle and temporal availability.</p>
</div>
<div class="section level3">
<h3 id="model-selection-adjustments-from-overdispersion">Model selection adjustments from overdispersion<a class="anchor" aria-label="anchor" href="#model-selection-adjustments-from-overdispersion"></a>
</h3>
<p>Overdispersion causes AIC to select overly-complex models, so analysts should specify the number/order of adjustment terms manually when fitting distance sampling models to data from camera traps, rather than allowing automated selection using AIC. <span class="citation">Howe, Buckland, Després-Einspenner, &amp; Kühl (2019)</span> describe two methods for performing model selection of distance sampling models in the face of overdispersion. Here we provide R functions to perform the first of these methods. The first method of <span class="citation">Howe et al. (2019)</span> employs a two-step process. First, an overdisersion factor <span class="math inline">\((\hat{c})\)</span> is computed for each key function family from the most complex model in each family. The <span class="math inline">\(\hat{c}\)</span> is derived from the <span class="math inline">\(\chi^2\)</span> goodness of fit test statistic divided by its degrees of freedom. This results in an adjusted AIC score for each model in the key function family:</p>
<p><span class="math display">\[QAIC = -2 \left \{ \frac{log(\mathcal{L}(\hat{\theta}))}{\hat{c}} \right \} + 2K\]</span></p>
<p>Code to perform this QAIC computation is found in the function <code>QAIC</code> in the <code>Distance</code> package, and produces the following results:</p>
<p>Tables of QAIC values for each key function family are shown below (code for <code>kable()</code> calls suppressed for easier readability of results).</p>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:pass1a">Table 1: </span><span id="tab:pass1a">Table 2: </span>QAIC values for uniform key models.
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:right;">
QAIC
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
uni1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2825.316
</td>
</tr>
<tr>
<td style="text-align:left;">
uni2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2826.822
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
uni3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
2823.921
</td>
</tr>
</tbody>
</table>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:pass1b">Table 3: </span><span id="tab:pass1b">Table 4: </span>QAIC values for half normal key models.
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:right;">
QAIC
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
hn0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2296.204
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
hn1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
2292.252
</td>
</tr>
<tr>
<td style="text-align:left;">
hn2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2294.096
</td>
</tr>
</tbody>
</table>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:pass1c">Table 5: </span><span id="tab:pass1c">Table 6: </span>QAIC values for hazard rate key models.
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
df
</th>
<th style="text-align:right;">
QAIC
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
hr0
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(255, 140, 26, 255) !important;">
2465.119
</td>
</tr>
<tr>
<td style="text-align:left;">
hr1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2466.395
</td>
</tr>
</tbody>
</table>
<p>From this first pass of model selection based on QAIC values, we find the model with the uniform key function preferred by QAIC has three cosine adjustment terms. The preferred model from the half normal key function family has one cosine adjustment term. Finally, the preferable model from the hazard rate key function family has no adjustment terms.</p>
<p>The second step of model selection ranks the models by their <span class="math inline">\(\hat{c}\)</span> values.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/QAIC.html">chi2_select</a></span><span class="op">(</span><span class="va">uni3</span>, <span class="va">hn1</span>, <span class="va">hr0</span><span class="op">)</span><span class="op">$</span><span class="va">criteria</span></span>
<span><span class="va">modnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">uni3</span>, <span class="va">hn1</span>, <span class="va">hr0</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">ddf</span><span class="op">$</span><span class="va">name.message</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">modnames</span>, <span class="va">chats</span><span class="op">)</span></span>
<span><span class="va">results.sort</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">chats</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">results.sort</span>, digits<span class="op">=</span><span class="fl">2</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             caption<span class="op">=</span><span class="st">"Compare with Table S5 of Howe et al. (2018)"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable_paper</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">row_spec</span><span class="op">(</span><span class="fl">1</span>, bold<span class="op">=</span><span class="cn">TRUE</span>,  background <span class="op">=</span> <span class="st">"#4da6ff"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:pass2">Table 7: </span><span id="tab:pass2">Table 8: </span>Compare with Table S5 of Howe et al. (2018)
</caption>
<thead><tr>
<th style="text-align:left;">
modnames
</th>
<th style="text-align:right;">
chats
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;background-color: rgba(77, 166, 255, 255) !important;">
uniform key function with cosine(1,2,3) adjustments
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(77, 166, 255, 255) !important;">
15.63
</td>
</tr>
<tr>
<td style="text-align:left;">
half-normal key function with cosine(2) adjustments
</td>
<td style="text-align:right;">
16.54
</td>
</tr>
<tr>
<td style="text-align:left;">
hazard-rate key function
</td>
<td style="text-align:right;">
17.21
</td>
</tr>
</tbody>
</table>
<p>For this data set, the model chosen by this algorithm that adjusts for overdispersion is the same model (uniform key with three cosine adjustments) as would have been chosen by conventional model selection; but again, not the model selected by <span class="citation">Howe et al. (2017)</span> because of the differing candidate model sets.</p>
</div>
<div class="section level3">
<h3 id="sensibility-check-for-detection-parameter-estimates">Sensibility check for detection parameter estimates<a class="anchor" aria-label="anchor" href="#sensibility-check-for-detection-parameter-estimates"></a>
</h3>
<p>As a check of the detection function vis-a-vis <span class="citation">Howe et al. (2017)</span>, the paper reports the effective detection radius (<span class="math inline">\(\rho\)</span>) to be 9.4m for the peak activity data set. <span class="citation">Howe et al. (2017)</span> employed a different candidate model set, resulting in the unadjusted hazard rate model as the preferred model. Here we present the estimated effective detection radius from the selected uniform key function with three cosine adjustment terms.</p>
<p>The effective detection radius can be derived from <span class="math inline">\(\hat{P_a}\)</span> as reported by the function <code>ds</code> as</p>
<p><span class="math display">\[\hat{\rho} = \sqrt{\hat{P_a} \cdot w^2}\]</span></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_a</span> <span class="op">&lt;-</span> <span class="va">uni3</span><span class="op">$</span><span class="va">ddf</span><span class="op">$</span><span class="va">fitted</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">mybreaks</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">mybreaks</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">rho</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">p_a</span> <span class="op">*</span> <span class="va">w</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><span class="math inline">\(\hat{P_a}\)</span> is estimated to be 0.329, resulting in an estimate of <span class="math inline">\(\hat{\rho}\)</span> of 7.457.</p>
</div>
<div class="section level3">
<h3 id="selected-detection-function">Selected detection function<a class="anchor" aria-label="anchor" href="#selected-detection-function"></a>
</h3>
<p>Figure <a href="#fig:selected">3</a> shows the detection function probability density function of selected model.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">uni3</span>, main<span class="op">=</span><span class="st">"Daytime activity"</span>, xlab<span class="op">=</span><span class="st">"Distance (m)"</span>,</span>
<span>     showpoints<span class="op">=</span><span class="cn">FALSE</span>, lwd<span class="op">=</span><span class="fl">3</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">uni3</span>, main<span class="op">=</span><span class="st">"Daytime activity"</span>, xlab<span class="op">=</span><span class="st">"Distance (m)"</span>, pdf<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>     showpoints<span class="op">=</span><span class="cn">FALSE</span>, lwd<span class="op">=</span><span class="fl">3</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:selected"></span>
<img src="camera-distill_files/figure-html/selected-1.png" alt="Detection function and probability density function of the selected detection function model."><img src="camera-distill_files/figure-html/selected-2.png" alt="Detection function and probability density function of the selected detection function model."><p class="caption">
Figure 3: Detection function and probability density function of the selected detection function model.
</p>
</div>
</div>
<div class="section level3">
<h3 id="density-estimates">Density estimates<a class="anchor" aria-label="anchor" href="#density-estimates"></a>
</h3>
<p>The camera traps do not view the entire area around them, as would be the case with simple point transect sampling. The portion of the area sampled needs to be incorporated in the estimation of abundance. The data file contains a column <code>multiplier</code> that represents the proportion of the circle sampled. <span class="citation">Howe et al. (2017)</span> notes the camera angle of view (AOV) of 42<span class="math inline">\(^{\circ}\)</span>. The proportion of the circle viewed is this value over 360<span class="math inline">\(^{\circ}\)</span>.</p>
<p>An argument to <code>dht2</code> is <code>sample_fraction</code>, an obvious place to include this quantity. We also add the multiplier for temporal availability described in <a href="#adjustment-for-temporal-availability">the section on temporal availability</a> The <code>dht2</code> function will produce analytical measures of precision with this call.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">viewangle</span> <span class="op">&lt;-</span> <span class="fl">42</span> <span class="co"># degrees</span></span>
<span><span class="va">samfrac</span> <span class="op">&lt;-</span> <span class="va">viewangle</span> <span class="op">/</span> <span class="fl">360</span></span>
<span><span class="va">peak.uni.dens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/dht2.html">dht2</a></span><span class="op">(</span><span class="va">uni3</span>, flatfile<span class="op">=</span><span class="va">DuikerCameraTraps</span>, strat_formula <span class="op">=</span> <span class="op">~</span><span class="fl">1</span>,</span>
<span>                     sample_fraction <span class="op">=</span> <span class="va">samfrac</span>, er_est <span class="op">=</span> <span class="st">"P2"</span>, multipliers <span class="op">=</span> <span class="va">avail</span>,</span>
<span>                     convert_units <span class="op">=</span> <span class="va">conversion</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">peak.uni.dens</span>, report<span class="op">=</span><span class="st">"density"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Density estimates from distance sampling</span></span>
<span><span class="co">## Stratification : geographical </span></span>
<span><span class="co">## Variance       : P2, n/L </span></span>
<span><span class="co">## Multipliers    : creation </span></span>
<span><span class="co">## Sample fraction : 0.1166667 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Summary statistics:</span></span>
<span><span class="co">##  .Label  Area CoveredArea   Effort     n  k ER se.ER cv.ER</span></span>
<span><span class="co">##   Total 40.37    2596.317 31483179 10284 21  0     0 0.268</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Density estimates:</span></span>
<span><span class="co">##  .Label Estimate    se    cv    LCI     UCI     df</span></span>
<span><span class="co">##   Total  17.2357 4.801 0.279 9.7947 30.3297 23.239</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Component percentages of variance:</span></span>
<span><span class="co">##  .Label Detection    ER Multipliers</span></span>
<span><span class="co">##   Total      2.17 92.77        5.06</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="bootstrap-for-variance-estimation">Bootstrap for variance estimation<a class="anchor" aria-label="anchor" href="#bootstrap-for-variance-estimation"></a>
</h2>
<p>To produce a more reliable estimate of the precision of the point estimate, produce bootstrap estimates using <code>bootdht</code>. The user needs to create a function and another named list to facilitate use of the bootstrap: a summary function to extract information from each replicate and a multiplier list describing how temporal availability is being derived.</p>
<div class="section level3">
<h3 id="summary-function">Summary function<a class="anchor" aria-label="anchor" href="#summary-function"></a>
</h3>
<p>As constructed, <code>mysummary</code> will keep the density estimate produced by each bootstrap replicate and the stratum (if any) to which the estimate pertains.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mysummary</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ests</span>, <span class="va">fit</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Label <span class="op">=</span> <span class="va">ests</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">D</span><span class="op">$</span><span class="va">Label</span>,</span>
<span>                    Dhat <span class="op">=</span> <span class="va">ests</span><span class="op">$</span><span class="va">individuals</span><span class="op">$</span><span class="va">D</span><span class="op">$</span><span class="va">Estimate</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiplier-function">Multiplier function<a class="anchor" aria-label="anchor" href="#multiplier-function"></a>
</h3>
<p>This rather complex list makes use of <code>make_activity_fn</code> that exists in the <code>Distance</code> package used to call the <code>fitact</code> function from the <code>activity</code> package. For the user, your responsibility is to provide three arguments to this function:</p>
<ul>
<li>vector containing the detection times in radians (computed in <a href="#functions-in-the-activity-package">earlier section</a>),</li>
<li>the manner in which precision of the temporal availability estimate is produced and</li>
<li>the number of hours per day the cameras are in operation</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mult</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>availability<span class="op">=</span> <span class="fu"><a href="../../../reference/make_activity_fn.html">make_activity_fn</a></span><span class="op">(</span><span class="va">trigger.events</span><span class="op">$</span><span class="va">rtime</span>, sample<span class="op">=</span><span class="st">"data"</span>,</span>
<span>                                            detector_daily_duration<span class="op">=</span><span class="va">camera.operation.per.day</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="speeding-up-the-bootstrap">Speeding up the bootstrap<a class="anchor" aria-label="anchor" href="#speeding-up-the-bootstrap"></a>
</h3>
<p>If you’ve tried running this example code in <code>R</code> you might have noticed that detection function fitting is quite slow. In general, camera traps produce a large amount of distance sampling data, and in addition these data tend to be “overdispersed” meaning (in this case) that there are lots of observations with the same distances. Together, this can cause analyses to run slowly, and this can be especially true for bootstrap analyses for variance estimation.</p>
<p>One way to speed up the bootstrap is to run multiple analyses in parallel, using multiple cores of your computer. You can achieve this using the <code>cores</code> argument to <code>bootdht</code> - for fastest results set this to the number of cores on your machine minus 1 (best to leave 1 free for other things). You can find the number of cores by calling <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">parallel::detectCores()</a></code> and we do this in the code below.</p>
<p>The second, which is only available to <code>Microsoft Windows</code> users, is to use the alternative optimization engine <code>MCDS.exe</code> to fit detection functions. To find out more about this, see our online example on the <a href="https://examples.distancesampling.org/mcds-dot-exe/mcds-dot-exe.html" class="external-link">Alternative optimization engine</a>. If you are using a <code>Windows</code> machine, you can download MCDS.exe into the required directory by executing the following lines (note, you only need to do this once, although if in future you update the <code>Distance</code> package you’ll need to re-download it):</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="st">"http://distancesampling.org/R/MCDS.exe"</span>, </span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"mrds"</span><span class="op">)</span>,<span class="st">"/MCDS.exe"</span><span class="op">)</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span>
<span><span class="co">#Detach and reload the Distance package to make use of it</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/detach.html" class="external-link">detach</a></span><span class="op">(</span><span class="st">"package:Distance"</span>, unload <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DistanceDevelopment/Distance/" class="external-link">Distance</a></span><span class="op">)</span></span></code></pre></div>
<p>We make use of this engine here by re-fitting the selected detection function model, <code>uni3</code>, using this engine, setting the <code>ds</code> argument <code>optimizer="MCDS"</code>. If you are not using a Windows machine or have not downloaded the MCDS.exe engine, then you should not execute this line, and your bootstrap will take longer to execute.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uni3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">3</span>, convert_units <span class="op">=</span> <span class="va">conversion</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span>,</span>
<span>           optimizer <span class="op">=</span> <span class="st">"MCDS"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="remaining-arguments-to-bootdht">Remaining arguments to <code>bootdht</code><a class="anchor" aria-label="anchor" href="#remaining-arguments-to-bootdht"></a>
</h3>
<p>Just as with <code>dht2</code> there are arguments for the <code>model</code>, <code>flatfile</code>, <code>sample_fraction</code>, <code>convert.units</code> and <code>multipliers</code> (although for <code>bootdht</code> <code>multipliers</code> uses a function rather than a single value). The only novel arguments to <code>dht2</code> are <code>resample_transects</code> indicating camera stations are to be resampled with replacement, and <code>nboot</code> for the number of bootstrap replicates.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n.cores</span> <span class="op">&lt;-</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">daytime.boot.uni</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/bootdht.html">bootdht</a></span><span class="op">(</span>model<span class="op">=</span><span class="va">uni3</span>, flatfile<span class="op">=</span><span class="va">DuikerCameraTraps</span>,</span>
<span>                          resample_transects <span class="op">=</span> <span class="cn">TRUE</span>, nboot<span class="op">=</span><span class="fl">500</span>, </span>
<span>                          cores <span class="op">=</span> <span class="va">n.cores</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>                          summary_fun<span class="op">=</span><span class="va">mysummary</span>, sample_fraction <span class="op">=</span> <span class="va">samfrac</span>,</span>
<span>                          convert_units <span class="op">=</span> <span class="va">conversion</span>, multipliers<span class="op">=</span><span class="va">mult</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="confidence-limits-computed-via-the-percentile-method-of-the-bootstrap-">Confidence limits computed via the percentile method of the bootstrap.<a class="anchor" aria-label="anchor" href="#confidence-limits-computed-via-the-percentile-method-of-the-bootstrap-"></a>
</h3>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">daytime.boot.uni</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Bootstrap results</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Boostraps          : 500 </span></span>
<span><span class="co">## Successes          : 499 </span></span>
<span><span class="co">## Failures           : 1 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##      median  mean   se  lcl   ucl  cv</span></span>
<span><span class="co">## Dhat  18.29 19.21 7.36 8.22 36.49 0.4</span></span></code></pre>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">daytime.boot.uni</span><span class="op">$</span><span class="va">Dhat</span>, breaks <span class="op">=</span> <span class="fl">20</span>, </span>
<span>     xlab<span class="op">=</span><span class="st">"Estimated density"</span>, main<span class="op">=</span><span class="st">"D-hat estimates bootstraps"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>v<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">daytime.boot.uni</span><span class="op">$</span><span class="va">Dhat</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.025</span>,<span class="fl">0.975</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, lwd<span class="op">=</span><span class="fl">2</span>, lty<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:sampdist"></span>
<img src="camera-distill_files/figure-html/sampdist-1.png" alt="Distribution of density estimates from bootstrap replicates."><p class="caption">
Figure 4: Distribution of density estimates from bootstrap replicates.
</p>
</div>
<p>The confidence interval derived from the bootstrap is considerably wider than the confidence interval derived from analytical methods (Figure <a href="#fig:sampdist">4</a>).</p>
</div>
<div class="section level3">
<h3 id="an-esoteric-note-on-starting-values-and-bootstrapping">An esoteric note on starting values and bootstrapping<a class="anchor" aria-label="anchor" href="#an-esoteric-note-on-starting-values-and-bootstrapping"></a>
</h3>
<p>Feel free to skip this unless you’re a fairly advanced user!</p>
<p>In some cases, it may be necessary to set starting values for the detection function optimization, to help it converge. This can be achieved using the <code>initial_values</code> argument of the <code>ds</code> function. As an example, say we want to use the fitted values from the uniform + 2 cosine function <code>uni2</code> as starting values for the first two parameters of the uniform + 3 cosine function fitting (and 0 for the third parameter). The following code does this:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uni3.with.startvals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">3</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span>, </span>
<span>           initial_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adjustment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">uni2</span><span class="op">$</span><span class="va">ddf</span><span class="op">$</span><span class="va">par</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<p>What about when it comes to bootstrapping for variance estimation. You can pass this model in to <code>boot.dht</code> with no problems, so long as you don’t set <code>ncores</code> to more than 1. If you do set <code>ncores</code> to more than 1 it won’t work, returning 0 successful bootstraps. Why? Because <code>uni2$ddf$par</code> is not passed along to all those parallel cores. To fix this you have to hard-code the starting values. So, in this example, we see that the values are</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">uni2</span><span class="op">$</span><span class="va">ddf</span><span class="op">$</span><span class="va">par</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.97178178 0.03541633</span></span></code></pre>
<p>and so we use</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uni3.with.startvals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">3</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span>, </span>
<span>           initial_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adjustment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.97178178</span>, <span class="fl">0.03541633</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in create_bins(data, cutpoints): Some distances were outside bins and</span></span>
<span><span class="co">## have been removed.</span></span></code></pre>
<p>and this will work fine in <code>bootdht</code>.</p>
<p>A final tip is that setting starting values can sometimes speed up the bootstrap (as optimization is faster if it starts from a good initial spot), so you might want to pass in the starting values from <code>uni3</code> to your bootstrap routine - something like the following, using the MCDS optimizer: (Note - this code is set not to run in this examples file - just here to show what you might use).</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">uni3</span><span class="op">$</span><span class="va">ddf</span><span class="op">$</span><span class="va">par</span><span class="op">)</span></span>
<span><span class="va">uni3.with.startvals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/ds.html">ds</a></span><span class="op">(</span><span class="va">DuikerCameraTraps</span>, transect <span class="op">=</span> <span class="st">"point"</span>, key<span class="op">=</span><span class="st">"unif"</span>, adjustment <span class="op">=</span> <span class="st">"cos"</span>,</span>
<span>           nadj<span class="op">=</span><span class="fl">3</span>,</span>
<span>           cutpoints <span class="op">=</span> <span class="va">mybreaks</span>, truncation <span class="op">=</span> <span class="va">trunc.list</span>, </span>
<span>           optimizer <span class="op">=</span> <span class="st">"MCDS"</span>,</span>
<span>           initial_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adjustment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.93518220</span>, <span class="op">-</span><span class="fl">0.05345965</span>, <span class="op">-</span><span class="fl">0.08073799</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">daytime.boot.uni</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../../reference/bootdht.html">bootdht</a></span><span class="op">(</span>model<span class="op">=</span><span class="va">uni3.with.startvals</span>, flatfile<span class="op">=</span><span class="va">DuikerCameraTraps</span>,</span>
<span>                          resample_transects <span class="op">=</span> <span class="cn">TRUE</span>, nboot<span class="op">=</span><span class="fl">500</span>, </span>
<span>                          cores <span class="op">=</span> <span class="va">n.cores</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>                          summary_fun<span class="op">=</span><span class="va">mysummary</span>, sample_fraction <span class="op">=</span> <span class="va">samfrac</span>,</span>
<span>                          convert_units <span class="op">=</span> <span class="va">conversion</span>, multipliers<span class="op">=</span><span class="va">mult</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-bessone_2020" class="csl-entry">
Bessone, M., Kühl, H. S., Hohmann, G., Herbinger, I., N’Goran, K. P., Asanzi, P., … Fruth, B. (2020). Drawn out of the shadows: Surveying secretive forest species with camera trap distance sampling. <em>Journal of Applied Ecology</em>, <em>57</em>(5), 963–974. <a href="https://doi.org/10.1111/1365-2664.13602" class="external-link">https://doi.org/10.1111/1365-2664.13602</a>
</div>
<div id="ref-howeetal" class="csl-entry">
Howe, E. J., Buckland, S. T., Després-Einspenner, M.-L., &amp; Kühl, H. S. (2017). Distance sampling with camera traps. <em>Methods in Ecology and Evolution</em>, <em>8</em>(11), 1558–1565. <a href="https://doi.org/10.1111/2041-210X.12790" class="external-link">https://doi.org/10.1111/2041-210X.12790</a>
</div>
<div id="ref-howe_model_2019" class="csl-entry">
Howe, E. J., Buckland, S. T., Després-Einspenner, M.-L., &amp; Kühl, H. S. (2019). Model selection with overdispersed distance sampling data. <em>Methods in Ecology and Evolution</em>, <em>10</em>(1), 38–47. <a href="https://doi.org/10.1111/2041-210X.13082" class="external-link">https://doi.org/10.1111/2041-210X.13082</a>
</div>
<div id="ref-dryad" class="csl-entry">
Howe, E. J., Buckland, S. T., Després-Einspenner, M.-L., Kühl, H. S., &amp; Buckland, S. T. (2018). <em>Data from: Distance sampling with camera traps</em>. https://doi.org/<a href="https://doi.org/10.5061/dryad.b4c70%20" class="external-link">https://doi.org/10.5061/dryad.b4c70 </a>
</div>
<div id="ref-miller" class="csl-entry">
Miller, D., Rexstad, E., Thomas, L., Marshall, L., &amp; Laake, J. (2019). Distance sampling in r. <em>Journal of Statistical Software, Articles</em>, <em>89</em>(1), 1–28. <a href="https://doi.org/10.18637/jss.v089.i01" class="external-link">https://doi.org/10.18637/jss.v089.i01</a>
</div>
<div id="ref-activity_pkg" class="csl-entry">
Rowcliffe, J. M. (2021). <em>Activity: Animal activity statistics</em>. Retrieved from <a href="https://CRAN.R-project.org/package=activity" class="external-link">https://CRAN.R-project.org/package=activity</a>
</div>
<div id="ref-rowcliffe_2014" class="csl-entry">
Rowcliffe, J. M., Kays, R., Kranstauber, B., Carbone, C., &amp; Jansen, P. A. (2014). Quantifying levels of animal activity using camera trap data. <em>Methods in Ecology and Evolution</em>, <em>5</em>(11), 1170–1179. <a href="https://doi.org/10.1111/2041-210X.12278" class="external-link">https://doi.org/10.1111/2041-210X.12278</a>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>We improve our site and software support by using Microsoft Clarity to see <br> how you use our website. By using our site, you agree that we and Microsoft <br> can collect and use this data. Clarity is GDPR compliant.</p>
</div>

<div class="pkgdown-footer-right">
  <p>If you wish to donate to development and maintenance</p>
</div>

    </footer>
</div>

  

  

  
</body>
</html>
